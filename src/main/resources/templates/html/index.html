
<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en">


<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>SqlToNoSQL - Graph</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js"
          integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3"
          crossorigin="anonymous"></script>

  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.13.1/css/dataTables.bootstrap5.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedcolumns/4.2.1/css/fixedColumns.bootstrap5.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/fixedheader/3.3.1/css/fixedHeader.bootstrap5.min.css"/>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/scroller/2.0.7/css/scroller.bootstrap5.min.css"/>

  <script type="text/javascript" src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/1.13.1/js/dataTables.bootstrap5.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/fixedcolumns/4.2.1/js/dataTables.fixedColumns.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/fixedheader/3.3.1/js/dataTables.fixedHeader.min.js"></script>
  <script type="text/javascript" src="https://cdn.datatables.net/scroller/2.0.7/js/dataTables.scroller.min.js"></script>

  <link th:href="@{/css/styles.css}" rel="stylesheet" />
  <link rel="icon" type="image/png" th:href="@{/images/logo.png}">
  <title>SqlToNoSQL - Graph</title>
</head>

<body>
<div class="p-4">
  <header class="d-flex flex-wrap justify-content-center py-3 border-bottom">
    <div href="#" class="d-flex align-items-centertext-dark text-decoration-none">
      <img th:src="@{/images/logo.png}" class="bi me-2" height="80" alt="">
      <span class="fs-1 font-monospace" style="color: var(--blue);"> SqlToNoSQL - Graph</span>
    </div>
  </header>
</div>

<div class="accordion px-4">
  <div class="accordion-item">
    <h2 class="accordion-header">
      <button id="btn-collapse"
              class="accordion-button titulo collapsed"
              type="button"
              style="padding: 12px"
              data-bs-toggle="collapse"
              data-bs-target="#crendeciais-acesso">
        Credenciais de Acesso
      </button>
    </h2>
    <div id="crendeciais-acesso" class="accordion-collapse collapse">
      <div class="accordion-body">
        <div class="card mb-3">
          <div class="row col p-4">
            <div class="" style="max-width: 17.4rem;">
              <img th:src="@{/images/dbIMG.png}" class="img-thumbnail rounded-start icone-bd" alt="Imgem banco de dados">
            </div>
            <div class="col">
              <div class="row">
                <div class="col">
                  <form id="form-target-nosql">
                    <div class="input-group mb-3">
                      <label class="input-group-text" for="select-target-nosql">Conector</label>
                      <select class="form-select" id="select-target-nosql" required>
                        <option selected>Selecione o conector...</option>
                      </select>
                    </div>

                    <div class="input-group mb-3">
                      <label class="input-group-text" for="target-nosql-usuario">Usuário</label>
                      <input id="target-nosql-usuario" name="target-nosql-usuario" type="text" class="form-control" required>
                    </div>

                    <div class="input-group mb-3">
                      <label class="input-group-text" for="target-nosql-senha">Senha</label>
                      <input id="target-nosql-senha" name="target-nosql-senha" type="password" class="form-control" autocomplete required>
                    </div>

                    <div class="input-group mb-3">
                      <label class="input-group-text" for="target-nosql-url">URL</label>
                      <input id="target-nosql-url" name="target-nosql-url" type="url" class="form-control" required>
                    </div>

                    <div class="input-group mb-3">
                      <label class="input-group-text" th:for="nome-db-novo">Banco de Dados</label>
                      <input id="nome-db-novo" name="nome-db-novo" type="text" class="form-control" minlength="5">
                    </div>

                    <div class="d-grid gap-2 d-md-flex justify-content-md-end">
                      <button type="button" id="editar-target" class="btn btn btn btn-primary">Editar</button>
                      <button type="submit" id="salvar-target" class="btn btn-warning btn-salvar">Salvar</button>
                    </div>

                  </form>
                </div>

              </div>
            </div>

            <div class="col-5 border">
              <h5>DESCRIÇÃO</h5>
              <pre>
<b>OBS:</b> é necessário ter uma conexão com <i>MONGO</i> com usuário <i>root</i> e senha <i>root</i>.
Está conexão pode ser utilziada como <i>target</i>.
Criar Conexão com SGBD (exemplo <i>Neo4j</i>)
  Connector: "NEO4J",
  Usuário: "neo4j"
  Senha: "pAsSw0rD",
  URL: "bolt://localhost:7687",
Criar o(s) banco(s) de dados, este será associado ao conector selecionado.
              </pre>
            </div>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="p-4">
  <div class="card">
    <div class="card-header titulo">
      Queries
    </div>
    <div class="card-body row col justify-content-center">

      <div class="col">
        <div class="input-group mb-3">
          <label class="input-group-text" for="select-nome-db-existente">Banco de Dados</label>
          <select class="form-select" id="select-nome-db-existente" required>
            <option selected>Selecione...</option>
            <option value="1">Neo4j</option>
            <option value="2">Two</option>
            <option value="3">Three</option>
          </select>
        </div>

        <div class="input-group mb-3">
          <input class="form-control" type="file" id="formFile">
          <button id="btn-executar-query" class="btn btn-warning btn-salvar" type="button">Executar</button>
        </div>

        <div class="form-floating">
          <textarea class="form-control" placeholder="Escreva uma expressão SQL" id="sql-query-text"
                    style="height: 100px"></textarea>
          <label for="sql-query-text">Escreva uma expressão SQL</label>
        </div>

        <div class="input-group mt-3">
          <label for="timer" class="input-group-text">Tempo de Execução</label>
          <input id="timer" type="text" class="form-control" disabled>
          <div class="btn-clock input-group-text">
            <span>
              <img th:src="@{/images/clock.png}" height="32" alt="Imagem de um Relógio"/>
            </span>
          </div>
        </div>
      </div>

      <div class="col-5 border">
      <h5>
        Realizando o Transferência para Banco NoSQL
      </h5>
        <pre>
<b>OBS:</b> A camada não faz a leitura automatica das definições das tabelas de um banco relacional.
1º Importar <i>script</i> de criação.
2º Importar <i>script</i> de inserção.

Comandos Suportados:
<i>DDL: CREATE | ALTER | DROP
DML: INSERT | UPDATE |SELECT | DELETE</i>
O Parse SQL utilizado suporta um conjunto limitado de sintaxe, para mais detalhes <a href="https://github.com/JSQLParser/JSqlParser">JSqlParser</a>.
        </pre>

      </div>
     <div>
       <hr id="separador" style="display: none"/>
     </div>

      <div class="row">
        <code id="sem-dados" class="p-0" style="display: none">
          Não há resultados para serem exibidos!
        </code>
      </div>

      <div id="resultados" style="display: none">
        <div id="select-tabelas" class="input-group mb-3">
          <label class="input-group-text" for="select-resultado-tabelas">Tabela</label>
          <select class="form-select" id="select-resultado-tabelas">
            <option selected></option>
          </select>
        </div>

        <div id="loading" style="display: none">
          <div class="d-flex justify-content-center">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Loading...</span>
            </div>
          </div>
        </div>

        <div id="div-tabela" class="table-responsive">
          <table id="table-resultados" class="table table-striped table-bordered nowrap" style="width: 100%">
          </table>
        </div>
      </div>



    </div>

  </div>
</div>

</body>

<footer class="footer mt-auto py-3 t-footer">
  <div class="container">
    <span>
      Sistema de mapeamento de BDR para NoSql orientado a grafo - Pablo Vicente & Lucas Oliveira - UFSC - 2022 ©
    </span>
  </div>
</footer>

<div id="model-alert" class="modal" tabindex="-1">
  <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
    <div class="modal-content">
      <div id="modal-header" class="modal-header">
        <h5 class="modal-title">ERRO</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <code id="code">

        </code>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-warning btn salvar" data-bs-dismiss="modal">Close</button>
<!--        <button type="button" class="btn btn-primary">Save changes</button>-->
      </div>
    </div>
  </div>
</div>


<script type="text/javascript" th:src="@{/js/index.js}"></script>
</html>